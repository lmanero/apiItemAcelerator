<html>
<head>
    <title>Listado items</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>
<h1>Listado de items:</h1>
<button onclick="addItem()">Registrar item</button>
<table>
    <tr>
        <td>Título:</td>
        <td>Descripción:</td>
        <td>Precio</td>
        <td>Condición</td>
        <td>Opciones</td>
    </tr>
    #foreach( $item in $items )
        <tr>
            <td>$item.title</td>
            <td>$item.description</td>
            <td>$item.price</td>
            <td>$item.condition</td>
            <td>
                <button onclick="deleteItem('$item.id')">Eliminar</button>
                <button onclick="modifyItem('$item.id')">Editar</button>
            </td>
        </tr>
    #end
</table>

<script language="javascript">
    function deleteItem(id) {
        $.ajax({
            url: '/items/'+id,
            dataType: 'json',
            type: 'delete',
            contentType: 'application/json',
            processData: false,
            success: function( data, textStatus, jQxhr ){
                window.location.replace("http://localhost:8080/listado-item");
            },
            error: function( jqXhr, textStatus, errorThrown ){
                alert("Error al eliminar el item");
            }
        });
    }
    function modifyItem(id) {
        window.location.replace("http://localhost:8080/modificar-item/"+id);
    }
    function addItem(id) {
        window.location.replace("http://localhost:8080/nuevo-item");
    }
</script>
<body>
</html>